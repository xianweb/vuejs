<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VueJS框架 | Vue Router路由</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/vuejs/assets/css/0.styles.dbf7d737.css" as="style"><link rel="preload" href="/vuejs/assets/js/app.2319739d.js" as="script"><link rel="preload" href="/vuejs/assets/js/14.deba7da2.js" as="script"><link rel="prefetch" href="/vuejs/assets/js/4.010a6daa.js"><link rel="prefetch" href="/vuejs/assets/js/1.2658faa5.js"><link rel="prefetch" href="/vuejs/assets/js/2.6ed9afdb.js"><link rel="prefetch" href="/vuejs/assets/js/3.28c3143f.js"><link rel="prefetch" href="/vuejs/assets/js/5.42e85b81.js"><link rel="prefetch" href="/vuejs/assets/js/6.7bc1c36d.js"><link rel="prefetch" href="/vuejs/assets/js/7.27da7be6.js"><link rel="prefetch" href="/vuejs/assets/js/8.f191ae11.js"><link rel="prefetch" href="/vuejs/assets/js/9.32533282.js"><link rel="prefetch" href="/vuejs/assets/js/10.f2002435.js"><link rel="prefetch" href="/vuejs/assets/js/11.0cff1bc2.js"><link rel="prefetch" href="/vuejs/assets/js/12.d9881867.js"><link rel="prefetch" href="/vuejs/assets/js/13.0d326fa1.js"><link rel="prefetch" href="/vuejs/assets/js/15.76e3ba40.js"><link rel="prefetch" href="/vuejs/assets/js/16.e9c8bcee.js"><link rel="prefetch" href="/vuejs/assets/js/17.459fb35e.js"><link rel="prefetch" href="/vuejs/assets/js/18.d71684d6.js">
    <link rel="stylesheet" href="/vuejs/assets/css/0.styles.dbf7d737.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/vuejs/" class="home-link router-link-active"><!----><span class="site-name">
      VueJS框架
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><!----></div></header><div class="sidebar-mask"></div><div class="sidebar"><!----><ul class="sidebar-links"><li><a href="/vuejs/page1.html" class="sidebar-link">Vue 实例</a></li><li><a href="/vuejs/page2.html" class="sidebar-link">模板语法</a></li><li><a href="/vuejs/page3.html" class="sidebar-link">计算属性和侦听器</a></li><li><a href="/vuejs/page4.html" class="sidebar-link">Class 与 Style 绑定</a></li><li><a href="/vuejs/page5.html" class="sidebar-link">条件渲染</a></li><li><a href="/vuejs/page6.html" class="sidebar-link">列表渲染</a></li><li><a href="/vuejs/page7.html" class="sidebar-link">事件处理</a></li><li><a href="/vuejs/page8.html" class="sidebar-link">表单输入绑定</a></li><li><a href="/vuejs/page9.html" class="sidebar-link">组件基础</a></li><li><a href="/vuejs/page10.html" class="sidebar-link">单文件组件</a></li><li><a href="/vuejs/page11.html" class="active sidebar-link">Vue Router路由</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuejs/page11.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/vuejs/page11.html#起步" class="sidebar-link">起步</a></li><li class="sidebar-sub-header"><a href="/vuejs/page11.html#动态路由匹配" class="sidebar-link">动态路由匹配</a></li><li class="sidebar-sub-header"><a href="/vuejs/page11.html#响应路由参数的变化" class="sidebar-link">响应路由参数的变化</a></li><li class="sidebar-sub-header"><a href="/vuejs/page11.html#嵌套路由" class="sidebar-link">嵌套路由</a></li><li class="sidebar-sub-header"><a href="/vuejs/page11.html#编程式的导航" class="sidebar-link">编程式的导航</a></li><li class="sidebar-sub-header"><a href="/vuejs/page11.html#命名路由" class="sidebar-link">命名路由</a></li><li class="sidebar-sub-header"><a href="/vuejs/page11.html#重定向和别名" class="sidebar-link">重定向和别名</a></li><li class="sidebar-sub-header"><a href="/vuejs/page11.html#路由组件传参" class="sidebar-link">路由组件传参</a></li><li class="sidebar-sub-header"><a href="/vuejs/page11.html#html5-history-模式" class="sidebar-link">HTML5 History 模式</a></li><li class="sidebar-sub-header"><a href="/vuejs/page11.html#路由懒加载" class="sidebar-link">路由懒加载</a></li></ul></li><li><a href="/vuejs/page12.html" class="sidebar-link">Vuex 状态管理</a></li><li><a href="/vuejs/page13.html" class="sidebar-link">Axios 中文说明</a></li></ul></div><div class="page"><div class="content"><h1 id="vue-router路由"><a href="#vue-router路由" aria-hidden="true" class="header-anchor">#</a> Vue Router路由</h1><h2 id="安装"><a href="#安装" aria-hidden="true" class="header-anchor">#</a> 安装</h2><h3 id="直接下载-cdn"><a href="#直接下载-cdn" aria-hidden="true" class="header-anchor">#</a> 直接下载 / CDN</h3><pre class="language-text"><code>https://unpkg.com/vue-router/dist/vue-router.js
</code></pre><p>在 <code>Vue</code> 后面加载 <code>vue-router</code>，它会自动安装的：</p><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/path/to/vue.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/path/to/vue-router.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><h3 id="npm"><a href="#npm" aria-hidden="true" class="header-anchor">#</a> NPM</h3><pre class="language-text"><code>npm install vue-router
</code></pre><p>如果在一个模块化工程中使用它，必须要通过 <code>Vue.use()</code> 明确地安装路由功能：</p><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span>
</code></pre><h2 id="起步"><a href="#起步" aria-hidden="true" class="header-anchor">#</a> 起步</h2><p>用 <code>Vue.js + Vue Router</code> 创建单页应用，是非常简单的。使用 <code>Vue.js</code> ，我们已经可以通过组合组件来组成应用程序，当你要把 <code>Vue Router</code> 添加进来，我们需要做的是，将组件 (<code>components</code>) 映射到路由 (<code>routes</code>)，然后告诉 <code>Vue Router</code> 在哪里渲染它们。下面是个基本例子：</p><h3 id="html"><a href="#html" aria-hidden="true" class="header-anchor">#</a> HTML</h3><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/vue/dist/vue.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/vue-router/dist/vue-router.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Hello App!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 使用 router-link 组件来导航. --&gt;</span>
    <span class="token comment">&lt;!-- 通过传入 `to` 属性指定链接. --&gt;</span>
    <span class="token comment">&lt;!-- &lt;router-link&gt; 默认会被渲染成一个 `&lt;a&gt;` 标签 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/foo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Go to Foo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/bar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Go to Bar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 路由出口 --&gt;</span>
  <span class="token comment">&lt;!-- 路由匹配到的组件将渲染在这里 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><pre class="language-js"><code><span class="token comment">// 0. 如果使用模块化机制编程，导入Vue和VueRouter，要调用 Vue.use(VueRouter)</span>

<span class="token comment">// 1. 定义 (路由) 组件。</span>
<span class="token comment">// 可以从其他文件 import 进来</span>
<span class="token keyword">const</span> Foo <span class="token operator">=</span> <span class="token punctuation">{</span> template<span class="token punctuation">:</span> <span class="token string">'&lt;div&gt;foo&lt;/div&gt;'</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> Bar <span class="token operator">=</span> <span class="token punctuation">{</span> template<span class="token punctuation">:</span> <span class="token string">'&lt;div&gt;bar&lt;/div&gt;'</span> <span class="token punctuation">}</span>

<span class="token comment">// 2. 定义路由</span>
<span class="token comment">// 每个路由应该映射一个组件。 其中&quot;component&quot; 可以是</span>
<span class="token comment">// 通过 Vue.extend() 创建的组件构造器，</span>
<span class="token comment">// 或者，只是一个组件配置对象。</span>
<span class="token comment">// 我们晚点再讨论嵌套路由。</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/foo'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> Foo <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/bar'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> Bar <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token comment">// 3. 创建 router 实例，然后传 `routes` 配置</span>
<span class="token comment">// 你还可以传别的配置参数, 不过先这么简单着吧。</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes <span class="token comment">// (缩写) 相当于 routes: routes</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 4. 创建和挂载根实例。</span>
<span class="token comment">// 记得要通过 router 配置参数注入路由，</span>
<span class="token comment">// 从而让整个应用都有路由功能</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  router
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>

<span class="token comment">// 现在，应用已经启动了！</span>
</code></pre><p>通过注入路由器，我们可以在任何组件内通过 <code>this.$router</code> 访问路由器，也可以通过 <code>this.$route</code> 访问当前路由：</p><pre class="language-js"><code><span class="token comment">// Home.vue</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">username</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 我们很快就会看到 `params` 是什么</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>username
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">goBack</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span>history<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span>
        <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="tip custom-block"><p class="custom-block-title">提示</p><p>该文档通篇都常使用 <code>router</code> 实例。留意一下 <code>this.$router</code> 和 <code>router</code> 使用起来完全一样。我们使用 <code>this.$router</code> 的原因是我们并不想在每个独立需要封装路由的组件中都导入路由。</p></div><p>要注意，当 <code>&lt;router-link&gt;</code> 对应的路由匹配成功，将自动设置 <code>class</code> 属性值 <code>.router-link-active</code>。查看 API 文档 学习更多相关内容。</p><h2 id="动态路由匹配"><a href="#动态路由匹配" aria-hidden="true" class="header-anchor">#</a> 动态路由匹配</h2><p>我们经常需要把某种模式匹配到的所有路由，全都映射到同个组件。例如，我们有一个 <code>User</code> 组件，对于所有 <code>ID</code> 各不相同的用户，都要使用这个组件来渲染。那么，我们可以在 <code>vue-router</code> 的路由路径中使用“动态路径参数”(dynamic segment) 来达到这个效果：</p><pre class="language-js"><code><span class="token keyword">const</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token punctuation">:</span> <span class="token string">'&lt;div&gt;User&lt;/div&gt;'</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 动态路径参数 以冒号开头</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/user/:id'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> User <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>现在呢，像 <code>/user/foo</code> 和 <code>/user/bar</code> 都将映射到相同的路由。</p><p>一个“路径参数”使用冒号 : 标记。当匹配到一个路由时，参数值会被设置到 <code>this.$route.params</code>，可以在每个组件内使用。于是，我们可以更新 <code>User</code> 的模板，输出当前用户的 <code>ID</code>：</p><pre class="language-js"><code><span class="token keyword">const</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token punctuation">:</span> <span class="token string">'&lt;div&gt;User {{ $route.params.id }}&lt;/div&gt;'</span>
<span class="token punctuation">}</span>
</code></pre><p>你可以在一个路由中设置多段“路径参数”，对应的值都会设置到 <code>$route.params</code> 中。例如：</p><p><img src="/vuejs/assets/img/vue6.ed63df35.png" alt></p><p>除了 <code>$route.params</code> 外，<code>$route</code> 对象还提供了其它有用的信息，例如，<code>$route.query</code> (如果 <code>URL</code> 中有查询参数)、<code>$route.hash</code> 等等。</p><h2 id="响应路由参数的变化"><a href="#响应路由参数的变化" aria-hidden="true" class="header-anchor">#</a> 响应路由参数的变化</h2><p>提醒一下，当使用路由参数时，例如从 <code>/user/foo</code> 导航到 <code>/user/bar</code>，<strong>原来的组件实例会被复用</strong>。因为两个路由都渲染<strong>同个组件</strong>，比起销毁再创建，<strong>复用则显得更加高效</strong>。不过，这也意味着组件的<strong>生命周期钩子不会再被调用</strong>。</p><p><strong>复用组件时</strong>，想对路由参数的变化作出响应的话，你可以简单地 <code>watch</code> (监测变化) <code>$route</code> 对象：</p><pre class="language-js"><code><span class="token keyword">const</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token punctuation">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>
  watch<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'$route'</span> <span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 对路由变化作出响应...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>或者使用 2.2 中引入的 <code>beforeRouteUpdate</code> 守卫：</p><pre class="language-js"><code><span class="token keyword">const</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token punctuation">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>
  <span class="token function">beforeRouteUpdate</span> <span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// don't forget to call next()</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><h2 id="嵌套路由"><a href="#嵌套路由" aria-hidden="true" class="header-anchor">#</a> 嵌套路由</h2><p>实际生活中的应用界面，通常由多层嵌套的组件组合而成。同样地，URL 中各段动态路径也按某种结构对应嵌套的各层组件，例如：</p><pre class="language-text"><code>/user/foo/profile                     /user/foo/posts
+------------------+                  +-----------------+
| User             |                  | User            |
| +--------------+ |                  | +-------------+ |
| | Profile      | |  +------------&gt;  | | Posts       | |
| |              | |                  | |             | |
| +--------------+ |                  | +-------------+ |
+------------------+                  +-----------------+
</code></pre><p>借助 <code>vue-router</code>，使用嵌套路由配置，就可以很简单地表达这种关系。</p><p>接着上节创建的 app：</p><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><pre class="language-js"><code><span class="token keyword">const</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token punctuation">:</span> <span class="token string">'&lt;div&gt;User {{ $route.params.id }}&lt;/div&gt;'</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/user/:id'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> User <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>这里的 <code>&lt;router-view&gt;</code> 是最顶层的出口，渲染最高级路由匹配到的组件。同样地，一个被渲染组件同样可以包含自己的嵌套 <code>&lt;router-view&gt;</code>。例如，在 <code>User</code> 组件的模板添加一个 <code>&lt;router-view&gt;</code>：</p><pre class="language-js"><code><span class="token keyword">const</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`
    &lt;div class=&quot;user&quot;&gt;
      &lt;h2&gt;User {{ $route.params.id }}&lt;/h2&gt;
      &lt;router-view&gt;&lt;/router-view&gt;
    &lt;/div&gt;
  `</span></span>
<span class="token punctuation">}</span>
</code></pre><p>要在嵌套的出口中渲染组件，需要在 <code>VueRouter</code> 的参数中使用 <code>children</code> 配置：</p><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/user/:id'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> User<span class="token punctuation">,</span>
      children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token comment">// 当 /user/:id/profile 匹配成功，</span>
          <span class="token comment">// UserProfile 会被渲染在 User 的 &lt;router-view&gt; 中</span>
          path<span class="token punctuation">:</span> <span class="token string">'profile'</span><span class="token punctuation">,</span>
          component<span class="token punctuation">:</span> UserProfile
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token comment">// 当 /user/:id/posts 匹配成功</span>
          <span class="token comment">// UserPosts 会被渲染在 User 的 &lt;router-view&gt; 中</span>
          path<span class="token punctuation">:</span> <span class="token string">'posts'</span><span class="token punctuation">,</span>
          component<span class="token punctuation">:</span> UserPosts
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="danger custom-block"><p class="custom-block-title">注意</p><p>以 <code>/</code> 开头的嵌套路径会被当作根路径。 这让你充分的使用嵌套组件而无须设置嵌套的路径。</p></div><p>你会发现，<code>children</code> 配置就是像 <code>routes</code> 配置一样的路由配置数组，所以呢，你可以嵌套多层路由。</p><p>此时，基于上面的配置，当你访问 <code>/user/foo</code> 时，<code>User</code> 的出口<strong>是不会渲染任何东西</strong>，这是<strong>因为没有匹配到合适的子路由</strong>。如果你想要渲染点什么，可以提供一个 <strong>空的</strong> 子路由：</p><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token punctuation">:</span> <span class="token string">'/user/:id'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> User<span class="token punctuation">,</span>
      children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// 当 /user/:id 匹配成功，</span>
        <span class="token comment">// UserHome 会被渲染在 User 的 &lt;router-view&gt; 中</span>
        <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> UserHome <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token comment">// ...其他子路由</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><h2 id="编程式的导航"><a href="#编程式的导航" aria-hidden="true" class="header-anchor">#</a> 编程式的导航</h2><p>除了使用 <code>&lt;router-link&gt;</code> 创建 <code>a</code> 标签来定义导航链接，我们还可以借助 <code>router</code> 的实例方法，通过编写代码来实现。</p><h3 id="router-push-location-oncomplete-onabort"><a href="#router-push-location-oncomplete-onabort" aria-hidden="true" class="header-anchor">#</a> router.push(location, onComplete?, onAbort?)</h3><div class="warning custom-block"><p class="custom-block-title">注意</p><p>在 Vue 实例内部，你可以通过 $router 访问路由实例。因此你可以调用 this.$router.push。</p></div><p>想要导航到不同的 <code>URL</code>，则使用 <code>router.push</code> 方法。这个方法会向 <code>history</code> 栈添加一个新的记录，所以，当用户点击浏览器后退按钮时，则回到之前的 <code>URL</code>。</p><p>当你点击 <code>&lt;router-link&gt;</code> 时，这个方法会在内部调用，所以说，点击 <code>&lt;router-link :to=&quot;...&quot;&gt;</code> 等同于调用 <code>router.push(...)</code>。</p><p><img src="data:image/png;base64,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" alt></p><p>该方法的参数可以是一个字符串路径，或者一个描述地址的对象。例如：</p><pre class="language-js"><code><span class="token comment">// 字符串</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'home'</span><span class="token punctuation">)</span>

<span class="token comment">// 对象</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'home'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 命名的路由</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span> params<span class="token punctuation">:</span> <span class="token punctuation">{</span> userId<span class="token punctuation">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 带查询参数，变成 /register?plan=private</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'register'</span><span class="token punctuation">,</span> query<span class="token punctuation">:</span> <span class="token punctuation">{</span> plan<span class="token punctuation">:</span> <span class="token string">'private'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="danger custom-block"><p class="custom-block-title">注意</p><p>如果提供了 path，params 会被忽略，上述例子中的 query 并不属于这种情况。取而代之的是下面例子的做法，你需要提供路由的 name 或手写完整的带有参数的 path：</p></div><pre class="language-js"><code><span class="token keyword">const</span> userId <span class="token operator">=</span> <span class="token number">123</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span> params<span class="token punctuation">:</span> <span class="token punctuation">{</span> userId <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; /user/123</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`/user/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>userId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; /user/123</span>
<span class="token comment">// 这里的 params 不生效</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span> params<span class="token punctuation">:</span> <span class="token punctuation">{</span> userId <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; /user</span>
</code></pre><h3 id="router-replace-location-oncomplete-onabort"><a href="#router-replace-location-oncomplete-onabort" aria-hidden="true" class="header-anchor">#</a> router.replace(location, onComplete?, onAbort?)</h3><p>跟 <code>router.push</code> 很像，唯一的不同就是，它不会向 <code>history</code> 添加新记录，而是跟它的方法名一样 —— 替换掉<strong>当前的 <code>history</code> 记录</strong>。</p><p><img src="data:image/png;base64,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" alt></p><h3 id="router-go-n"><a href="#router-go-n" aria-hidden="true" class="header-anchor">#</a> router.go(n)</h3><p>这个方法的参数是一个整数，意思是在 <code>history</code> 记录中向前或者后退多少步，类似 <code>window.history.go(n)</code>。</p><pre class="language-js"><code><span class="token comment">// 在浏览器记录中前进一步，等同于 history.forward()</span>
router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">// 后退一步记录，等同于 history.back()</span>
router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">// 前进 3 步记录</span>
router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment">// 如果 history 记录不够用，那就默默地失败呗</span>
router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
</code></pre><h2 id="命名路由"><a href="#命名路由" aria-hidden="true" class="header-anchor">#</a> 命名路由</h2><p>有时候，通过一个名称来标识一个路由显得更方便一些，特别是在链接一个路由，或者是执行一些跳转的时候。你可以在创建 <code>Router</code> 实例的时候，在 <code>routes</code> 配置中给某个路由设置名称。</p><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token punctuation">:</span> <span class="token string">'/user/:userId'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span>
      component<span class="token punctuation">:</span> User
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>要链接到一个命名路由，可以给 <code>router-link</code> 的 <code>to</code> 属性传一个对象：</p><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{ name: <span class="token punctuation">'</span>user<span class="token punctuation">'</span>, params: { userId: 123 }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>User<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
</code></pre><p>这跟代码调用 <code>router.push()</code> 是一回事：</p><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span> params<span class="token punctuation">:</span> <span class="token punctuation">{</span> userId<span class="token punctuation">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>这两种方式都会把路由导航到 <code>/user/123</code> 路径。</p><h2 id="重定向和别名"><a href="#重定向和别名" aria-hidden="true" class="header-anchor">#</a> 重定向和别名</h2><h3 id="重定向"><a href="#重定向" aria-hidden="true" class="header-anchor">#</a> 重定向</h3><p>重定向也是通过 <code>routes</code> 配置来完成，下面例子是从 <code>/a</code> 重定向到 <code>/b</code>：</p><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/a'</span><span class="token punctuation">,</span> redirect<span class="token punctuation">:</span> <span class="token string">'/b'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>重定向的目标也可以是一个命名的路由：</p><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/a'</span><span class="token punctuation">,</span> redirect<span class="token punctuation">:</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'foo'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>甚至是一个方法，动态返回重定向目标：</p><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/a'</span><span class="token punctuation">,</span> redirect<span class="token punctuation">:</span> to <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 方法接收 目标路由 作为参数</span>
      <span class="token comment">// return 重定向的 字符串路径/路径对象</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><h3 id="别名"><a href="#别名" aria-hidden="true" class="header-anchor">#</a> 别名</h3><p>“重定向”的意思是，当用户访问 <code>/a</code>时，<code>URL</code>将会被替换成 <code>/b</code>，然后匹配路由为 <code>/b</code>，那么“别名”又是什么呢？</p><p><strong><code>/a</code> 的别名是 <code>/b</code>，意味着，当用户访问 <code>/b</code> 时，<code>URL</code> 会保持为 <code>/b</code>，但是路由匹配则为 <code>/a</code>，就像用户访问 <code>/a</code> 一样。</strong></p><p>上面对应的路由配置为：</p><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/a'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">,</span> alias<span class="token punctuation">:</span> <span class="token string">'/b'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>“别名”的功能让你可以自由地将 UI 结构映射到任意的 URL，而不是受限于配置的嵌套路由结构。</p><h2 id="路由组件传参"><a href="#路由组件传参" aria-hidden="true" class="header-anchor">#</a> 路由组件传参</h2><p>在组件中使用 <code>$route</code> 会使之与其对应路由形成<strong>高度耦合</strong>，从而使组件只能在某些特定的 <code>URL</code> 上使用，<strong>限制了其灵活性</strong>。</p><p>使用 <code>props</code> 将组件和路由解耦：</p><p><strong>取代与 <code>$route</code> 的耦合</strong></p><pre class="language-js"><code><span class="token keyword">const</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token punctuation">:</span> <span class="token string">'&lt;div&gt;User {{ $route.params.id }}&lt;/div&gt;'</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/user/:id'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> User <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p><strong>通过 <code>props</code> 解耦</strong></p><pre class="language-js"><code><span class="token keyword">const</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  template<span class="token punctuation">:</span> <span class="token string">'&lt;div&gt;User {{ id }}&lt;/div&gt;'</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/user/:id'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> User<span class="token punctuation">,</span> props<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 对于包含命名视图的路由，你必须分别为每个命名视图添加 `props` 选项：</span>
    <span class="token punctuation">{</span>
      path<span class="token punctuation">:</span> <span class="token string">'/user/:id'</span><span class="token punctuation">,</span>
      components<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token punctuation">:</span> User<span class="token punctuation">,</span> sidebar<span class="token punctuation">:</span> Sidebar <span class="token punctuation">}</span><span class="token punctuation">,</span>
      props<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> sidebar<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>这样你便可以在任何地方使用该组件，使得该组件更易于重用和测试。</p><h3 id="布尔模式"><a href="#布尔模式" aria-hidden="true" class="header-anchor">#</a> 布尔模式</h3><p>如果 <code>props</code> 被设置为 <code>true</code>，<code>route.params</code> 将会被设置为组件属性。</p><h2 id="html5-history-模式"><a href="#html5-history-模式" aria-hidden="true" class="header-anchor">#</a> HTML5 History 模式</h2><p><code>vue-router</code> 默认 <code>hash</code> 模式 —— 使用 <code>URL</code> 的 <code>hash</code> 来模拟一个完整的 <code>URL</code>，于是当 <code>URL</code> 改变时，<strong>页面不会重新加载</strong>。</p><p>如果不想要很丑的 <code>hash</code>，我们可以用路由的 <code>history</code> 模式，这种模式充分利用 <code>history.pushState</code> API 来完成 <code>URL</code> 跳转而无须重新加载页面。</p><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'history'</span><span class="token punctuation">,</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>当你使用 <code>history</code> 模式时，URL 就像正常的 url，例如 <code>http://yoursite.com/user/id</code>，也好看！</p><p>不过这种模式要玩好，还需要后台配置支持。因为我们的应用是个单页客户端应用，如果后台没有正确的配置，当用户在浏览器直接访问 <code>http://oursite.com/user/id</code> 就会返回 <code>404</code>，这就不好看了。</p><h3 id="后端配置例子"><a href="#后端配置例子" aria-hidden="true" class="header-anchor">#</a> 后端配置例子</h3><h4 id="apache"><a href="#apache" aria-hidden="true" class="header-anchor">#</a> Apache</h4><pre class="language-text"><code>&lt;IfModule mod_rewrite.c&gt;
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.html [L]
&lt;/IfModule&gt;
</code></pre><h4 id="nginx"><a href="#nginx" aria-hidden="true" class="header-anchor">#</a> nginx</h4><pre class="language-text"><code>location / {
  try_files $uri $uri/ /index.html;
}
</code></pre><h4 id="原生-node-js"><a href="#原生-node-js" aria-hidden="true" class="header-anchor">#</a> 原生 Node.js</h4><pre class="language-js"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> httpPort <span class="token operator">=</span> <span class="token number">80</span>

http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'index.htm'</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> content<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'We cannot open &quot;index.htm&quot; file.'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'text/html; charset=utf-8'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>httpPort<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Server listening on: http://localhost:%s'</span><span class="token punctuation">,</span> httpPort<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><h4 id="iis"><a href="#iis" aria-hidden="true" class="header-anchor">#</a> IIS</h4><ul><li>安装 <a href="https://www.iis.net/downloads/microsoft/url-rewrite" target="_blank" rel="noopener noreferrer">IIS UrlRewrite</a></li><li>在你的网站根目录中创建一个 <code>web.config</code> 文件，内容如下：</li></ul><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>system.webServer</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rewrite</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rules</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rule</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Handle History Mode and custom 404/500<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stopProcessing</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>match</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(.*)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>conditions</span> <span class="token attr-name">logicalGrouping</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>MatchAll<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>add</span> <span class="token attr-name">input</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{REQUEST_FILENAME}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">matchType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>IsFile<span class="token punctuation">&quot;</span></span> <span class="token attr-name">negate</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>add</span> <span class="token attr-name">input</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{REQUEST_FILENAME}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">matchType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>IsDirectory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">negate</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>conditions</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Rewrite<span class="token punctuation">&quot;</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rule</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rules</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rewrite</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>system.webServer</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><h4 id="警告"><a href="#警告" aria-hidden="true" class="header-anchor">#</a> 警告</h4><p>给个警告，因为这么做以后，你的服务器就不再返回 <code>404</code> 错误页面，因为对于所有路径都会返回 <code>index.html</code> 文件。为了避免这种情况，你应该在 Vue 应用里面覆盖所有的路由情况，然后在给出一个 <code>404</code> 页面。</p><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'history'</span><span class="token punctuation">,</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'*'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> NotFoundComponent <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><h2 id="路由懒加载"><a href="#路由懒加载" aria-hidden="true" class="header-anchor">#</a> 路由懒加载</h2><p>当打包构建应用时，<code>Javascript</code> 包会变得非常大，影响页面加载。如果我们能把不同路由对应的组件分割成不同的代码块，然后当路由被访问的时候才加载对应组件，这样就更加高效了。</p><p>结合 <code>Vue</code> 的异步组件和 <code>Webpack</code> 的代码分割功能，轻松实现路由组件的懒加载。</p><p>首先，可以将异步组件定义为返回一个 <code>Promise</code> 的工厂函数 (该函数返回的 <code>Promise</code> 应该 <code>resolve</code> 组件本身)：</p><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">/* 组件定义对象 */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>第二，在 <code>Webpack 2</code> 中，我们可以使用动态 <code>import</code>语法来定义代码分块点 (split point)：</p><pre class="language-js"><code><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./Foo.vue'</span><span class="token punctuation">)</span> <span class="token comment">// 返回 Promise</span>
</code></pre><div class="tip custom-block"><p class="custom-block-title">注意</p><p>如果您使用的是 <code>Babel</code>，你将需要添加 <code>syntax-dynamic-import</code> 插件，才能使 <code>Babel</code> 可以正确地解析语法。</p></div><p>结合这两者，这就是如何定义一个能够被 <code>Webpack</code> 自动代码分割的异步组件。</p><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./Foo.vue'</span><span class="token punctuation">)</span>
</code></pre><p>在路由配置中什么都不需要改变，只需要像往常一样使用 Foo：</p><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/foo'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> Foo <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><h3 id="把组件按组分块"><a href="#把组件按组分块" aria-hidden="true" class="header-anchor">#</a> 把组件按组分块</h3><p>有时候我们想把某个路由下的所有组件都打包在同个异步块 (<code>chunk</code>) 中。只需要使用 命名 <code>chunk</code>，<strong>一个特殊的注释语法</strong>来提供 <code>chunk name</code> (需要 <code>Webpack &gt; 2.4</code>)。</p><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;group-foo&quot; */</span> <span class="token string">'./Foo.vue'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">Bar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;group-foo&quot; */</span> <span class="token string">'./Bar.vue'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">Baz</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;group-foo&quot; */</span> <span class="token string">'./Baz.vue'</span><span class="token punctuation">)</span>
</code></pre></div><!----><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/vuejs/page10.html" class="prev">
          单文件组件
        </a></span><span class="next"><a href="/vuejs/page12.html">
          Vuex 状态管理
        </a> →
      </span></p></div></div></div></div>
    <script src="/vuejs/assets/js/14.deba7da2.js" defer></script><script src="/vuejs/assets/js/app.2319739d.js" defer></script>
  </body>
</html>
